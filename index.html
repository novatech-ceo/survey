<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الاستطلاعات | Survey System</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* الأنماط الرئيسية */
        :root {
            --primary: #1a237e;
            --primary-light: #283593;
            --secondary: #00c853;
            --danger: #ff1744;
            --warning: #ff9800;
            --light: #f5f5f5;
            --dark: #212121;
            --success: #4caf50;
            --info: #2196f3;
            --purple: #7e57c2;
            --gold: #ffd700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* الأنماط الرئيسية */
        .main-header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .main-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: white;
        }

        /* إعلان المسؤول */
        .announcement-panel {
            background: linear-gradient(135deg, rgba(126, 87, 194, 0.3), rgba(103, 58, 183, 0.3));
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--purple);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(126, 87, 194, 0.5); }
            to { box-shadow: 0 0 20px rgba(126, 87, 194, 0.8); }
        }

        /* الشبكات */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        /* البطاقات */
        .stat-card, .candidate-card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .candidate-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            color: var(--dark);
        }

        .candidate-image {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--secondary);
            margin-bottom: 20px;
        }

        /* الأزرار */
        .vote-btn {
            background: linear-gradient(135deg, var(--secondary), #00e676);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 20px 0;
            width: 100%;
            font-weight: bold;
            transition: all 0.4s;
        }

        .vote-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 200, 83, 0.4);
        }

        .vote-btn:disabled {
            background: #bdbdbd;
            cursor: not-allowed;
        }

        /* لوحة التحكم */
        .dashboard {
            display: none;
            width: 100%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            margin: 0 auto;
        }

        .tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .tab.active {
            background: var(--primary-light);
        }

        /* الإشعارات */
        .notification {
            position: fixed;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 18px 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            animation: fadeIn 0.5s, fadeOut 0.5s 2.5s forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* أنماط متجاوبة */
        @media (max-width: 768px) {
            .main-header h1 {
                font-size: 1.8rem;
            }
            
            .candidates-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- لوحة تسجيل الدخول -->
    <div class="login-container" id="loginContainer" style="display: none; max-width: 400px; margin: 50px auto; padding: 30px; background: rgba(255,255,255,0.1); border-radius: 15px; text-align: center;">
        <h1><i class="fas fa-user-shield"></i> دخول المسؤول</h1>
        <input type="password" id="adminPassword" class="form-control" placeholder="كلمة المرور" style="width: 100%; padding: 12px; margin: 20px 0; border-radius: 8px; border: none;">
        <button onclick="adminLogin()" class="vote-btn">دخول</button>
        <div id="loginMessage" style="margin-top: 15px;"></div>
    </div>

    <!-- لوحة التحكم -->
    <div class="dashboard" id="dashboard" style="display: none;">
        <div style="padding: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1><i class="fas fa-cogs"></i> لوحة التحكم</h1>
                <button onclick="logout()" class="vote-btn" style="width: auto; padding: 10px 20px;">تسجيل الخروج</button>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="switchTab('basic')">الإعدادات</div>
                <div class="tab" onclick="switchTab('candidates')">المرشحين</div>
                <div class="tab" onclick="switchTab('announcement')">الإعلان</div>
            </div>

            <!-- الإعدادات الأساسية -->
            <div id="basic-tab" class="tab-content" style="display: block;">
                <h3>إعدادات النظام</h3>
                <div style="margin: 20px 0;">
                    <label>عنوان النظام</label>
                    <input type="text" id="systemTitleInput" class="form-control" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: none;">
                    
                    <label>الرسالة الترحيبية</label>
                    <textarea id="welcomeMessageInput" class="form-control" rows="3" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: none;"></textarea>
                    
                    <button onclick="updateSystemSettings()" class="vote-btn" style="margin-top: 20px;">حفظ التغييرات</button>
                </div>
            </div>

            <!-- إدارة المرشحين -->
            <div id="candidates-tab" class="tab-content" style="display: none;">
                <h3>إضافة مرشح جديد</h3>
                <div style="margin: 20px 0;">
                    <input type="text" id="newCandidateName" placeholder="اسم المرشح" class="form-control" style="width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none;">
                    <input type="text" id="newCandidateParty" placeholder="الحزب" class="form-control" style="width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none;">
                    <input type="text" id="newCandidateImage" placeholder="رابط الصورة" class="form-control" style="width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none;">
                    <button onclick="addCandidate()" class="vote-btn" style="margin-top: 10px;">إضافة مرشح</button>
                </div>

                <h3>المرشحين الحاليين</h3>
                <div id="candidatesList"></div>
            </div>

            <!-- الإعلان -->
            <div id="announcement-tab" class="tab-content" style="display: none;">
                <h3>الإعلان المخصص</h3>
                <div style="margin: 20px 0;">
                    <label>عنوان الإعلان</label>
                    <input type="text" id="announcementTitleInput" class="form-control" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: none;">
                    
                    <label>نص الإعلان</label>
                    <textarea id="announcementTextInput" class="form-control" rows="4" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 8px; border: none;"></textarea>
                    
                    <button onclick="saveAnnouncement()" class="vote-btn" style="margin-top: 20px;">حفظ الإعلان</button>
                    <button onclick="clearAnnouncement()" class="vote-btn" style="margin-top: 10px; background: var(--danger);">حذف الإعلان</button>
                </div>
            </div>
        </div>
    </div>

    <!-- الواجهة الرئيسية -->
    <div class="container" id="mainContent">
        <!-- رأس الصفحة -->
        <header class="main-header">
            <h1 id="mainTitle">النظام الانتخابي الذكي</h1>
            <p id="welcomeMessage">مرحباً بك في نظام التصويت الإلكتروني</p>
            
            <!-- إعلان المسؤول -->
            <div id="announcementDisplay" class="announcement-panel" style="display: none;">
                <h3 id="announcementTitle"></h3>
                <p id="announcementText"></p>
                <small style="opacity: 0.7;">من إدارة النظام</small>
            </div>

            <!-- حالة التصويت -->
            <div style="margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 10px;">
                <h3><i class="fas fa-clock"></i> حالة التصويت</h3>
                <div id="votingStatus">جاري التحميل...</div>
            </div>

            <!-- زر الدخول للمسؤول -->
            <button onclick="showAdminLogin()" style="background: var(--purple); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 10px;">
                <i class="fas fa-user-lock"></i> دخول المسؤول
            </button>
        </header>

        <!-- الإحصائيات -->
        <section class="stats-section">
            <h2 style="text-align: center; margin-bottom: 20px;">الإحصائيات</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-users" style="font-size: 2rem; color: var(--info); margin-bottom: 10px;"></i>
                    <h3 id="totalCandidates">0</h3>
                    <p>المرشحين</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-vote-yea" style="font-size: 2rem; color: var(--secondary); margin-bottom: 10px;"></i>
                    <h3 id="totalVotes">0</h3>
                    <p>إجمالي الأصوات</p>
                </div>
            </div>
        </section>

        <!-- المرشحين -->
        <section class="candidates-section">
            <h2 style="text-align: center; margin-bottom: 20px;">المرشحون</h2>
            <div class="candidates-grid" id="candidatesGrid">
                <!-- سيتم تعبئتها بالجافاسكريبت -->
            </div>
        </section>

        <!-- قسم الاقتراحات البسيط -->
        <section style="margin: 40px 0;">
            <div class="stat-card">
                <h3><i class="fas fa-lightbulb"></i> شاركنا رأيك</h3>
                <p>ما الموضوع الذي تريد التصويت عليه القادم؟</p>
                
                <textarea id="suggestionInput" placeholder="اكتب اقتراحك هنا..." 
                          style="width: 100%; padding: 15px; margin: 15px 0; border-radius: 10px; border: none; min-height: 100px;"></textarea>
                
                <button onclick="submitSuggestion()" class="vote-btn">
                    <i class="fas fa-paper-plane"></i> إرسال الاقتراح
                </button>
                
                <div id="suggestionMessage" style="margin-top: 15px;"></div>
            </div>
        </section>
    </div>

<script>
// ============================================
// إعدادات Firebase
// ============================================
const firebaseConfig = {
    apiKey: "AIzaSyDqT2m55ULjiHn-zs58C7YG_wJzae2lRHs",
    authDomain: "election-voting-system-89aed.firebaseapp.com",
    databaseURL: "https://election-voting-system-89aed-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "election-voting-system-89aed",
    storageBucket: "election-voting-system-89aed.firebasestorage.app",
    messagingSenderId: "104907607761",
    appId: "1:104907607761:web:e1f3775b137cb4fe643ff0",
    measurementId: "G-D3K8MQ3WSZ"
};

// تهيئة Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// المراجع الرئيسية
const systemRef = database.ref('system');
const candidatesRef = database.ref('candidates');
const suggestionsRef = database.ref('suggestions');

// ============================================
// المتغيرات العامة
// ============================================
let isAdmin = false;
let hasVoted = false;
let currentUser = 'user_' + Date.now();

// ============================================
// نظام الإشعارات
// ============================================
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.innerHTML = `<i class="fas fa-bell"></i> ${message}`;
    notification.style.background = type === 'success' ? '#4caf50' : 
                                   type === 'error' ? '#ff1744' : '#ff9800';
    document.body.appendChild(notification);
    
    setTimeout(() => notification.remove(), 3000);
}

// ============================================
// نظام تسجيل الدخول
// ============================================
function showAdminLogin() {
    document.getElementById('loginContainer').style.display = 'block';
    document.getElementById('mainContent').style.display = 'none';
}

function adminLogin() {
    const password = document.getElementById('adminPassword').value;
    
    // كلمة مرور بسيطة (يمكن تغييرها)
    if (password === 'admin123') {
        isAdmin = true;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        showNotification('مرحباً بالمسؤول!', 'success');
        
        // تحميل الإعدادات الحالية
        loadSystemSettings();
        loadCandidates();
    } else {
        document.getElementById('loginMessage').innerHTML = 
            '<div style="color: #ff1744; background: rgba(255,23,68,0.1); padding: 10px; border-radius: 8px;">كلمة المرور غير صحيحة</div>';
    }
}

function logout() {
    isAdmin = false;
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('mainContent').style.display = 'block';
    showNotification('تم تسجيل الخروج', 'info');
}

// ============================================
// نظام العناوين والإعلانات (المتزامن)
// ============================================
function updateSystemSettings() {
    const title = document.getElementById('systemTitleInput').value;
    const message = document.getElementById('welcomeMessageInput').value;
    
    systemRef.update({
        title: title,
        welcomeMessage: message,
        lastUpdated: new Date().toISOString()
    })
    .then(() => {
        showNotification('تم حفظ الإعدادات على جميع الأجهزة', 'success');
    })
    .catch(error => {
        showNotification('خطأ في الحفظ: ' + error.message, 'error');
    });
}

// الاستماع لتحديثات النظام
systemRef.on('value', (snapshot) => {
    const data = snapshot.val();
    if (data) {
        // تحديث العناوين
        document.getElementById('mainTitle').textContent = data.title || 'النظام الانتخابي الذكي';
        document.getElementById('welcomeMessage').textContent = data.welcomeMessage || 'مرحباً بك';
        document.title = data.title || 'النظام الانتخابي';
        
        // تحديث لوحة التحكم إذا كانت مفتوحة
        if (isAdmin) {
            document.getElementById('systemTitleInput').value = data.title || '';
            document.getElementById('welcomeMessageInput').value = data.welcomeMessage || '';
        }
    }
});

// تحميل إعدادات النظام للمسؤول
function loadSystemSettings() {
    systemRef.once('value')
        .then(snapshot => {
            const data = snapshot.val();
            if (data) {
                document.getElementById('systemTitleInput').value = data.title || '';
                document.getElementById('welcomeMessageInput').value = data.welcomeMessage || '';
            }
        });
}

// ============================================
// نظام الإعلانات
// ============================================
function saveAnnouncement() {
    const title = document.getElementById('announcementTitleInput').value;
    const text = document.getElementById('announcementTextInput').value;
    
    systemRef.update({
        announcement: {
            title: title,
            text: text,
            date: new Date().toISOString()
        }
    })
    .then(() => {
        showNotification('تم نشر الإعلان على جميع الأجهزة', 'success');
    });
}

function clearAnnouncement() {
    systemRef.update({
        announcement: null
    })
    .then(() => {
        showNotification('تم حذف الإعلان', 'info');
        document.getElementById('announcementTitleInput').value = '';
        document.getElementById('announcementTextInput').value = '';
    });
}

// الاستماع لتحديثات الإعلان
systemRef.on('value', (snapshot) => {
    const data = snapshot.val();
    const announcementDisplay = document.getElementById('announcementDisplay');
    
    if (data && data.announcement) {
        document.getElementById('announcementTitle').textContent = data.announcement.title;
        document.getElementById('announcementText').textContent = data.announcement.text;
        announcementDisplay.style.display = 'block';
    } else {
        announcementDisplay.style.display = 'none';
    }
});

// ============================================
// نظام المرشحين
// ============================================
function addCandidate() {
    const name = document.getElementById('newCandidateName').value;
    const party = document.getElementById('newCandidateParty').value;
    const image = document.getElementById('newCandidateImage').value || 'https://via.placeholder.com/140';
    
    if (!name || !party) {
        showNotification('يرجى ملء جميع الحقول', 'error');
        return;
    }
    
    candidatesRef.push({
        name: name,
        party: party,
        image: image,
        votes: 0
    })
    .then(() => {
        showNotification('تم إضافة المرشح', 'success');
        document.getElementById('newCandidateName').value = '';
        document.getElementById('newCandidateParty').value = '';
        document.getElementById('newCandidateImage').value = '';
    });
}

// الاستماع لتحديثات المرشحين
candidatesRef.on('value', (snapshot) => {
    const candidates = [];
    let totalVotes = 0;
    
    snapshot.forEach(child => {
        const candidate = {
            id: child.key,
            ...child.val()
        };
        candidates.push(candidate);
        totalVotes += candidate.votes;
    });
    
    // تحديث الإحصائيات
    document.getElementById('totalCandidates').textContent = candidates.length;
    document.getElementById('totalVotes').textContent = totalVotes;
    
    // عرض المرشحين
    renderCandidates(candidates);
    
    // تحديث لوحة التحكم إذا كانت مفتوحة
    if (isAdmin) {
        renderAdminCandidates(candidates);
    }
});

function renderCandidates(candidates) {
    const grid = document.getElementById('candidatesGrid');
    grid.innerHTML = '';
    
    candidates.forEach(candidate => {
        const card = document.createElement('div');
        card.className = 'candidate-card';
        card.innerHTML = `
            <img src="${candidate.image}" class="candidate-image" alt="${candidate.name}">
            <h3>${candidate.name}</h3>
            <p>${candidate.party}</p>
            <p style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">
                ${candidate.votes} صوت
            </p>
            <button class="vote-btn" onclick="voteForCandidate('${candidate.id}')" 
                    ${hasVoted ? 'disabled' : ''}>
                ${hasVoted ? 'تم التصويت' : 'صوت الآن'}
            </button>
        `;
        grid.appendChild(card);
    });
}

function renderAdminCandidates(candidates) {
    const list = document.getElementById('candidatesList');
    list.innerHTML = '';
    
    candidates.forEach(candidate => {
        const item = document.createElement('div');
        item.className = 'stat-card';
        item.style.margin = '10px 0';
        item.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong>${candidate.name}</strong> - ${candidate.party}
                    <br>الأصوات: ${candidate.votes}
                </div>
                <div>
                    <button onclick="deleteCandidate('${candidate.id}')" 
                            style="background: var(--danger); color: white; border: none; padding: 5px 10px; border-radius: 5px; margin-left: 10px;">
                        حذف
                    </button>
                </div>
            </div>
        `;
        list.appendChild(item);
    });
}

function voteForCandidate(candidateId) {
    if (hasVoted) {
        showNotification('لقد قمت بالتصويت مسبقاً', 'error');
        return;
    }
    
    // تحديث الأصوات في Firebase
    const candidateRef = database.ref(`candidates/${candidateId}`);
    
    candidateRef.transaction(candidate => {
        if (candidate) {
            candidate.votes = (candidate.votes || 0) + 1;
        }
        return candidate;
    })
    .then(() => {
        hasVoted = true;
        localStorage.setItem('voted_' + candidateId, 'true');
        showNotification('شكراً لتصويتك!', 'success');
    });
}

function deleteCandidate(candidateId) {
    if (confirm('هل أنت متأكد من حذف هذا المرشح؟')) {
        database.ref(`candidates/${candidateId}`).remove()
            .then(() => {
                showNotification('تم حذف المرشح', 'success');
            });
    }
}

// تحميل المرشحين للمسؤول
function loadCandidates() {
    candidatesRef.once('value')
        .then(snapshot => {
            const candidates = [];
            snapshot.forEach(child => {
                candidates.push({
                    id: child.key,
                    ...child.val()
                });
            });
            renderAdminCandidates(candidates);
        });
}

// ============================================
// نظام الاقتراحات
// ============================================
function submitSuggestion() {
    const text = document.getElementById('suggestionInput').value.trim();
    
    if (!text) {
        document.getElementById('suggestionMessage').innerHTML = 
            '<div style="color: #ff9800; background: rgba(255,152,0,0.1); padding: 10px; border-radius: 8px;">يرجى كتابة اقتراح</div>';
        return;
    }
    
    suggestionsRef.push({
        text: text,
        user: currentUser,
        timestamp: new Date().toISOString(),
        votes: 0
    })
    .then(() => {
        document.getElementById('suggestionInput').value = '';
        document.getElementById('suggestionMessage').innerHTML = 
            '<div style="color: #4caf50; background: rgba(76,175,80,0.1); padding: 10px; border-radius: 8px;">شكراً لاقتراحك!</div>';
        
        setTimeout(() => {
            document.getElementById('suggestionMessage').innerHTML = '';
        }, 3000);
    });
}

// ============================================
// نظام التبويبات
// ============================================
function switchTab(tabName) {
    // إخفاء جميع التبويبات
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
    });
    
    // إزالة النشاط من جميع التبويبات
    document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // إظهار التبويب المحدد
    document.getElementById(tabName + '-tab').style.display = 'block';
    
    // تفعيل التبويب
    document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
}

// ============================================
// تهيئة التطبيق
// ============================================
function initApp() {
    // توليد معرف المستخدم
    if (!localStorage.getItem('userId')) {
        localStorage.setItem('userId', currentUser);
    } else {
        currentUser = localStorage.getItem('userId');
    }
    
    // التحقق إذا كان المستخدم قد صوت مسبقاً
    hasVoted = localStorage.getItem('hasVoted') === 'true';
    
    // تحديث حالة التصويت
    updateVotingStatus();
    
    // تحديث كل 10 ثواني
    setInterval(updateVotingStatus, 10000);
    
    console.log('✅ التطبيق جاهز - بكل حب للعراق وأهل العراق ❤️');
}

function updateVotingStatus() {
    const now = new Date();
    const statusElement = document.getElementById('votingStatus');
    
    // وقت افتراضي للتصويت (يمكن تعديله)
    const endTime = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000); // 7 أيام من الآن
    const timeLeft = endTime - now;
    
    if (timeLeft > 0) {
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        
        statusElement.innerHTML = `
            <div style="font-size: 1.2rem; color: var(--secondary);">
                <i class="fas fa-check-circle"></i> التصويت مفتوح
            </div>
            <div style="margin-top: 10px;">
                متبقي: ${days} يوم و ${hours} ساعة
            </div>
        `;
    } else {
        statusElement.innerHTML = `
            <div style="font-size: 1.2rem; color: var(--danger);">
                <i class="fas fa-times-circle"></i> التصويت مغلق
            </div>
        `;
    }
}

// بدء التطبيق
document.addEventListener('DOMContentLoaded', initApp);
</script>
</body>
</html>
